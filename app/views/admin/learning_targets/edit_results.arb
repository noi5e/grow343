
form method: :post, action: update_results_admin_learning_target_path(resource, version: params[:version]) do
  input type: :hidden, name: :_method, value: :put
  input type: :hidden, name: :authenticity_token, value: form_authenticity_token

  panel "#{resource.title} V1 Results" do
    table_for results do
      column :name do |result|
        result.student.name
      end
      column :score do |result|
        input type: :number, step: 0.25, name: "results[#{result.student_id}][score]", value: result.score
      end
      column :objectives do |result|
        input({
          type: :hidden,
          name: "results[#{result.student_id}][learning_objective_ids][]",
          value: nil,
        })
        resource.learning_objectives.each do |objective|
          div do
            id = "student_#{result.student_id}_objective_#{objective.id}"
            input({
              type: :checkbox,
              name: "results[#{result.student_id}][learning_objective_ids][]",
              value: objective.id,
              checked: result.achieved?(objective),
              id: id
            })
            label objective.name, for: id
          end
        end
        nil
      end
    end
  end

  input type: :submit, class: :button

end
